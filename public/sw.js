import { precacheAndRoute } from 'workbox-precaching';
import { registerRoute } from 'workbox-routing';
import { CacheFirst, NetworkFirst } from 'workbox-strategies';

// Precache the files generated by Workbox
precacheAndRoute(self.__WB_MANIFEST);

// Cache static assets
registerRoute(
    ({ request }) => request.destination === 'script' ||
        request.destination === 'style' ||
        request.url.includes('firebase'),
    new CacheFirst({
        cacheName: 'static-assets',
    })
);

// Cache HTML files with NetworkFirst strategy
registerRoute(
    ({ request }) => request.mode === 'navigate',
    new NetworkFirst({
        cacheName: 'html-cache',
    })
);

// Cache other requests with NetworkFirst strategy
registerRoute(
    ({ request }) => true,
    new NetworkFirst({
        cacheName: 'dynamic-content',
    })
);
